function o(e,n){const r=e.querySelector(".error");r&&r.remove();const t=document.createElement("p");t.setAttribute("class","error"),t.innerText=n,e.insertBefore(t,e.firstChild)}function s(e){return typeof e=="object"&&"field"in e&&"message"in e}async function a(e,n={}){try{const r=await fetch(e,n);if(!r.ok){const t=await r.json();throw Array.isArray(t)&&t.every(i=>s(i))?t:s(t)?[t]:[{field:"unknown",message:"Unknown error"}]}return r.status===200?await r.json():void 0}catch(r){throw r instanceof TypeError?[{field:"network",message:"Could not connect to service."}]:r instanceof SyntaxError?[{field:"internal",message:"Failed to parse the response body. The response may be empty or the route may not be returning JSON as expected."}]:r}}function c(e,n){console.error(`${n.field}: ${n.message}`),n.field==="network"?o(e,"Could not connect to service :("):n.field==="internal"&&o(e,"Something went wrong when trying to use the service :(")}export{a as f,c as h,s as i};
