import{b as h,r as D,i as w,a as A}from"./burgerMenu-C0HmBuw3.js";import{f as d,i as l,h as p}from"./handleGlobalError-HzpnPoeA.js";function k(){const t=".loader-container",e=document.querySelector(t);h(e,t)&&e.classList.add("remove")}class y{constructor(e="https://hjort-backend.azurewebsites.net/api/public"){this.apiUrl=e}async getAllCourseMenus(){return await d(`${this.apiUrl}/course-menu`)}async getAllCourses(e){return await d(`${this.apiUrl}/course/${e}`)}}class C{constructor(e="https://hjort-backend.azurewebsites.net/api/public"){this.apiUrl=e}async getAllDrinkMenus(){return await d(`${this.apiUrl}/drink-menu`)}async getAllDrinks(e){return await d(`${this.apiUrl}/drink/${e}`)}}async function v(t){try{return await new y().getAllCourses(t)}catch(e){if(Array.isArray(e)&&e.every(r=>l(r))){const r=e;for(const n of r)p(document.body,n)}else console.error("Unexpected app error",e);return null}}async function g(){try{return await new y().getAllCourseMenus()}catch(t){if(Array.isArray(t)&&t.every(e=>l(e))){const e=t;for(const r of e)p(document.body,r)}else console.error("Unexpected app error",t);return null}}async function T(){const t=Array(),e=await g();if(e)await Promise.all(e.map(async r=>{const n=await v(r.id);if(n)t.push({menu:r,courses:n});else return}));else return[];return t}function M(t,e){const r=document.createDocumentFragment(),n=document.createElement("article"),s=document.createElement("h1");s.innerText=t.title;const i=document.createElement("div");i.classList.add("starters");const o=document.createElement("div");o.classList.add("mains");const a=document.createElement("div");a.classList.add("desserts");const c=document.createElement("span");c.classList.add("divider");const f=document.createElement("span");f.classList.add("divider"),e.forEach(E=>{const u=document.createElement("p");switch(u.innerText=E.name,E.type){case"starter":i.appendChild(u);break;case"main":o.appendChild(u);break;case"dessert":a.appendChild(u);break}});const m=document.createElement("p");return m.classList.add("price-text"),m.innerText=`${t.priceTot.toString()},-`,n.appendChild(s),n.appendChild(i),n.appendChild(c),n.appendChild(o),n.appendChild(f),n.appendChild(a),n.appendChild(m),r.appendChild(n),r}function L(t){const e=".course-menu-container",r=document.querySelector(e);h(r,e)&&(t.forEach(n=>{r.appendChild(M(n.menu,n.courses))}),r.classList.add("show"))}async function b(t){try{return await new C().getAllDrinks(t)}catch(e){if(Array.isArray(e)&&e.every(r=>l(r))){const r=e;for(const n of r)p(document.body,n)}else console.error("Unexpected app error",e);return null}}async function x(){try{return await new C().getAllDrinkMenus()}catch(t){if(Array.isArray(t)&&t.every(e=>l(e))){const e=t;for(const r of e)p(document.body,r)}else console.error("Unexpected app error",t);return null}}async function U(){const t=Array(),e=await x();if(e)await Promise.all(e.map(async r=>{const n=await b(r.id);if(n)t.push({menu:r,drinks:n});else return}));else return[];return t}function S(t,e,r){const n=document.createDocumentFragment(),s=document.createElement("article"),i=document.createElement("div");i.classList.add("drinks"),e.forEach(a=>{const c=document.createElement("p");c.innerText=a.name,i.appendChild(c)});const o=document.createElement("p");if(o.classList.add("price-text"),o.innerText=`${t.priceTot.toString()},-`,t.title!==""){const a=document.createElement("h1");a.innerText=t.title,s.appendChild(a)}if(t.subtitle!==""){const a=document.createElement("h2");a.innerText=t.subtitle,s.appendChild(a)}if(s.appendChild(i),s.appendChild(o),r){const a=document.createElement("span");a.classList.add("divider"),s.appendChild(a)}return n.appendChild(s),n}function P(t){const e=".drink-menu-container",r=document.querySelector(e);if(!h(r,e))return;let n=0,s=!0;t.forEach(i=>{n++,s=n!==t.length,r.appendChild(S(i.menu,i.drinks,s))}),r.classList.add("show")}async function R(){D(),w(),A();const[t,e]=await Promise.all([T(),U()]);L(t),P(e),k()}R();
