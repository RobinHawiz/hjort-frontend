import{b as h,r as D,i as A,a as w}from"./burgerMenu-CTWpPJJC.js";import{f as d,i as u,h as p}from"./handleGlobalError-HzpnPoeA.js";function k(){const t=".loader-container",e=document.querySelector(t);h(e,t)&&e.classList.add("remove")}const v="https://hjort-backend.azurewebsites.net/api/public",T=v;class y{constructor(e=T){this.apiUrl=e}async getAllCourseMenus(){return await d(`${this.apiUrl}/course-menu`)}async getAllCourses(e){return await d(`${this.apiUrl}/course/${e}`)}}const L="https://hjort-backend.azurewebsites.net/api/public",g=L;class C{constructor(e=g){this.apiUrl=e}async getAllDrinkMenus(){return await d(`${this.apiUrl}/drink-menu`)}async getAllDrinks(e){return await d(`${this.apiUrl}/drink/${e}`)}}async function M(){const t=Array(),e=await U();if(e)await Promise.all(e.map(async r=>{const n=await b(r.id);if(n)t.push({menu:r,courses:n});else return}));else return[];return t}async function U(){try{return await new y().getAllCourseMenus()}catch(t){if(Array.isArray(t)&&t.every(e=>u(e))){const e=t;for(const r of e)p(document.body,r)}else console.error("Unexpected app error",t);return null}}async function b(t){try{return await new y().getAllCourses(t)}catch(e){if(Array.isArray(e)&&e.every(r=>u(r))){const r=e;for(const n of r)p(document.body,n)}else console.error("Unexpected app error",e);return null}}function S(t,e){const r=document.createDocumentFragment(),n=document.createElement("article"),a=document.createElement("h1");a.innerText=t.title;const i=document.createElement("div");i.classList.add("starters");const o=document.createElement("div");o.classList.add("mains");const s=document.createElement("div");s.classList.add("desserts");const c=document.createElement("span");c.classList.add("divider");const E=document.createElement("span");E.classList.add("divider"),e.forEach(f=>{const l=document.createElement("p");switch(l.innerText=f.name,f.type){case"starter":i.appendChild(l);break;case"main":o.appendChild(l);break;case"dessert":s.appendChild(l);break}});const m=document.createElement("p");return m.classList.add("price-text"),m.innerText=`${t.priceTot.toString()},-`,n.appendChild(a),n.appendChild(i),n.appendChild(c),n.appendChild(o),n.appendChild(E),n.appendChild(s),n.appendChild(m),r.appendChild(n),r}function x(t){const e=".course-menu-container",r=document.querySelector(e);h(r,e)&&(t.forEach(n=>{r.appendChild(S(n.menu,n.courses))}),r.classList.add("show"))}async function _(){const t=await P();return t?await Promise.all(t.map(async e=>{const r=await R(e.id);if(r)return{menu:e,drinks:r}})):[]}async function P(){try{return await new C().getAllDrinkMenus()}catch(t){if(Array.isArray(t)&&t.every(e=>u(e))){const e=t;for(const r of e)p(document.body,r)}else console.error("Unexpected app error",t);return null}}async function R(t){try{return await new C().getAllDrinks(t)}catch(e){if(Array.isArray(e)&&e.every(r=>u(r))){const r=e;for(const n of r)p(document.body,n)}else console.error("Unexpected app error",e);return null}}function $(t,e,r){const n=document.createDocumentFragment(),a=document.createElement("article"),i=document.createElement("div");i.classList.add("drinks"),e.forEach(s=>{const c=document.createElement("p");c.innerText=s.name,i.appendChild(c)});const o=document.createElement("p");if(o.classList.add("price-text"),o.innerText=`${t.priceTot.toString()},-`,t.title!==""){const s=document.createElement("h1");s.innerText=t.title,a.appendChild(s)}if(t.subtitle!==""){const s=document.createElement("h2");s.innerText=t.subtitle,a.appendChild(s)}if(a.appendChild(i),a.appendChild(o),r){const s=document.createElement("span");s.classList.add("divider"),a.appendChild(s)}return n.appendChild(a),n}function N(t){const e=".drink-menu-container",r=document.querySelector(e);if(!h(r,e))return;let n=!0;t.forEach((a,i)=>{n=i+1!==t.length,r.appendChild($(a.menu,a.drinks,n))}),r.classList.add("show")}async function I(){D(),A(),w();const[t,e]=await Promise.all([M(),_()]);x(t),N(e),k()}I();
